<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/white"
    tools:context=".presentation.features.book.DetailBookFragment">

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <include
            android:id="@+id/appbar_product_detail"
            layout="@layout/appbar_product_detail"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent" />

        <ScrollView
            android:id="@+id/scrollView"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:fillViewport="true"
            app:layout_constraintBottom_toTopOf="@id/bottomBar"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@+id/appbar_product_detail">

            <androidx.constraintlayout.widget.ConstraintLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <RelativeLayout
                    android:id="@+id/imagesLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    app:layout_constraintTop_toTopOf="parent">

                    <androidx.viewpager2.widget.ViewPager2
                        android:id="@+id/viewPager"
                        android:layout_width="match_parent"
                        android:layout_height="350dp"
                        android:layout_centerInParent="true" />

                    <LinearLayout
                        android:id="@+id/imageCounterContainer"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentEnd="true"
                        android:layout_alignParentBottom="true"
                        android:layout_margin="12dp"
                        android:background="@drawable/bg_counter_corner"
                        android:paddingHorizontal="16dp"
                        android:paddingVertical="6dp"
                        android:orientation="horizontal">

                        <TextView
                            android:id="@+id/tvImageCounter"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="1/5"
                            android:textColor="@color/white"
                            android:textSize="14sp"
                            android:fontFamily="sans-serif"
                            android:textStyle="bold"/>
                    </LinearLayout>
                </RelativeLayout>

                <androidx.constraintlayout.widget.ConstraintLayout
                    android:id="@+id/priceContainer"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:paddingStart="16dp"
                    android:paddingEnd="16dp"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/imagesLayout">

                    <TextView
                        android:id="@+id/tvPriceBook"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:fontFamily="sans-serif"
                        android:gravity="bottom"
                        android:text="55.000đ"
                        android:textColor="@color/primary"
                        android:textSize="24sp"
                        android:textStyle="bold"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toTopOf="parent" />

                    <TextView
                        android:id="@+id/tvDiscountPercent"
                        android:layout_width="wrap_content"
                        android:layout_height="24dp"
                        android:layout_marginStart="8dp"
                        android:background="@drawable/bg_discount_badge"
                        android:fontFamily="sans-serif"
                        android:gravity="center"
                        android:paddingStart="4dp"
                        android:paddingEnd="4dp"
                        android:text="-35%"
                        android:textColor="@color/white"
                        android:textSize="10sp"
                        app:layout_constraintBottom_toBottomOf="@id/tvPriceBook"
                        app:layout_constraintStart_toEndOf="@id/tvPriceBook"
                        app:layout_constraintTop_toTopOf="@id/tvPriceBook" />

                    <TextView
                        android:id="@+id/tvNameBook"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:fontFamily="sans-serif"
                        android:lineSpacingExtra="4dp"
                        android:text="Bác Sĩ Cuối Cùng Dưới Tán Hoa Anh Đào - Tập 3 -Tặng Kèm Bookmark"
                        android:textColor="@color/black"
                        android:textSize="18sp"
                        app:layout_constraintStart_toStartOf="@id/tvPriceBook"
                        app:layout_constraintTop_toBottomOf="@id/tvPriceBook" />

                    <!-- Rating and Reviews Row -->
                    <RatingBar
                        android:id="@+id/ratingBar"
                        style="@style/Widget.AppCompat.RatingBar.Small"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:numStars="1"
                        android:progressTint="@android:color/holo_orange_light"
                        android:scaleX="1.3"
                        android:scaleY="1.3"
                        android:stepSize="0.5"
                        app:layout_constraintStart_toStartOf="@id/tvNameBook"
                        app:layout_constraintTop_toBottomOf="@id/tvNameBook" />

                    <TextView
                        android:id="@+id/reviewsText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="4dp"
                        android:fontFamily="sans-serif"
                        android:text="(0)"
                        android:textColor="@color/grey_dark"
                        android:textSize="16sp"
                        app:layout_constraintBottom_toBottomOf="@id/ratingBar"
                        app:layout_constraintStart_toEndOf="@id/ratingBar"
                        app:layout_constraintTop_toTopOf="@id/ratingBar" />


                    <TextView
                        android:id="@+id/reviewsDivider"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:fontFamily="sans-serif"
                        android:text="|"
                        android:textColor="@color/grey_light"
                        android:textSize="20sp"
                        app:layout_constraintBottom_toBottomOf="@id/reviewsText"
                        app:layout_constraintStart_toEndOf="@id/reviewsText"
                        app:layout_constraintTop_toTopOf="@id/reviewsText" />

                    <TextView
                        android:id="@+id/tvSold"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:fontFamily="sans-serif"
                        android:text="Đã bán 102"
                        android:textColor="@color/grey_dark"
                        android:textSize="16sp"
                        app:layout_constraintBottom_toBottomOf="@id/reviewsDivider"
                        app:layout_constraintStart_toEndOf="@id/reviewsDivider"
                        app:layout_constraintTop_toTopOf="@id/reviewsDivider" />

                    <ImageView
                        android:id="@+id/btnFavorite"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_favorite"
                        app:layout_constraintBottom_toBottomOf="@id/tvSold"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintTop_toTopOf="@id/tvSold" />

                </androidx.constraintlayout.widget.ConstraintLayout>

                <View
                    android:id="@+id/view1"
                    android:layout_width="match_parent"
                    android:layout_height="8dp"
                    android:layout_marginTop="8dp"
                    android:background="@color/grey_100"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/priceContainer" />

                <androidx.constraintlayout.widget.ConstraintLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:paddingStart="16dp"
                    android:paddingEnd="16dp"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toBottomOf="@id/view1">

                    <TextView
                        android:id="@+id/textInformation"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:text="Thông tin sản phẩm"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toTopOf="parent" />

                    <LinearLayout
                        android:id="@+id/tableInfomation"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="16dp"
                        android:orientation="vertical"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toBottomOf="@id/textInformation">

                        <!-- Row 1: Label and Content -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:paddingVertical="12dp">

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginEnd="8dp"
                                android:layout_weight="1"
                                android:text="Mã hàng"
                                android:textColor="@color/grey_dark"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/tvIdBook"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="2"
                                android:text="MH12345"
                                android:textSize="14sp" />

                        </LinearLayout>

                        <!-- Horizontal Line -->
                        <View
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/grey_100" />

                        <!-- Row 2: Label and Content -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:paddingVertical="12dp">

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginEnd="8dp"
                                android:layout_weight="1"
                                android:text="Độ tuổi"
                                android:textColor="@color/grey_dark"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/tvAge"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="2"
                                android:text="12+"
                                android:textSize="14sp" />

                        </LinearLayout>
                        <!-- Horizontal Line -->
                        <View
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/grey_100" />

                        <!-- Row 2: Label and Content -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:paddingVertical="12dp">

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginEnd="8dp"
                                android:layout_weight="1"
                                android:text="Tác giả"
                                android:textColor="@color/grey_dark"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/tvAuthor"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="2"
                                android:text="Tô Hoài"
                                android:textSize="14sp" />

                        </LinearLayout>
                        <!-- Horizontal Line -->
                        <View
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/grey_100" />

                        <!-- Row 2: Label and Content -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:paddingVertical="12dp">

                            <TextView
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginEnd="8dp"
                                android:layout_weight="1"
                                android:text="Nhà xuất bản"
                                android:textColor="@color/grey_dark"
                                android:textSize="14sp"
                                android:textStyle="bold" />

                            <TextView
                                android:id="@+id/tvPublisher"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_weight="2"
                                android:text="NXB Văn Học"
                                android:textSize="14sp" />

                        </LinearLayout>
                        <!-- Horizontal Line -->
                        <View
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/grey_100" />
                    </LinearLayout>

                    <!-- TextView with max 6 lines -->
                    <TextView
                        android:id="@+id/tvDescription"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="16dp"
                        android:ellipsize="end"
                        android:fontFamily="sans-serif"
                        android:maxLines="6"
                        android:text="Dế Mèn Phiêu Lưu Ký là một trong những tác phẩm văn học thiếu nhi nổi tiếng nhất của nhà văn Tô Hoài. Câu chuyện xoay quanh hành trình trưởng thành và khám phá thế giới của chú dế Mèn gan dạ, thông minh. Trên đường đi, Dế Mèn đã gặp gỡ nhiều người bạn mới, trải qua những thử thách cam go, từ đó rút ra những bài học sâu sắc về cuộc sống, tình bạn, lòng dũng cảm và trách nhiệm với cộng đồng. Tác phẩm không chỉ giàu tính nhân văn mà còn có giá trị giáo dục cao, phù hợp cho thiếu nhi và cả người lớn muốn tìm lại tuổi thơ. Văn phong mộc mạc, gần gũi cùng các tình tiết hấp dẫn khiến cuốn sách trở thành một phần không thể thiếu trong tủ sách của nhiều thế hệ độc giả Việt Nam."
                        android:textColor="@color/grey_dark"
                        android:textSize="14sp"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toBottomOf="@id/tableInfomation" />

                    <include
                        android:id="@+id/btnSeeMore"
                        layout="@layout/btn_see_more"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toBottomOf="@id/tvDescription" />

                </androidx.constraintlayout.widget.ConstraintLayout>


            </androidx.constraintlayout.widget.ConstraintLayout>
        </ScrollView>

        <LinearLayout
            android:id="@+id/bottomBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/white"
            android:elevation="8dp"
            android:orientation="horizontal"
            android:translationZ="8dp"
            app:layout_constraintBottom_toBottomOf="parent">

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="3"
                android:gravity="center"
                android:orientation="horizontal"
                android:padding="8dp">

                <ImageButton
                    android:id="@+id/btnDecrease"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@android:color/transparent"
                    android:fontFamily="sans-serif"
                    android:src="@drawable/ic_minus"
                    app:tint="@color/grey_dark" />

                <TextView
                    android:id="@+id/tvCount"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:fontFamily="sans-serif"
                    android:gravity="center"
                    android:paddingHorizontal="8dp"
                    android:text="1"
                    android:textColor="@android:color/black"
                    android:textSize="18sp" />

                <ImageButton
                    android:id="@+id/btnIncrease"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@android:color/transparent"
                    android:fontFamily="sans-serif"
                    android:src="@drawable/ic_add"
                    app:tint="@color/grey_dark" />

            </LinearLayout>

            <View
                android:layout_width="1dp"
                android:layout_height="match_parent"
                android:background="@color/grey_100" />

            <!-- Add to Cart Button (2/5 of width) -->
            <androidx.appcompat.widget.AppCompatButton
                android:id="@+id/btnAddToCart"
                android:layout_width="0dp"
                android:layout_height="54dp"
                android:layout_gravity="center_vertical"
                android:layout_weight="4"
                android:background="@android:color/transparent"
                android:fontFamily="sans-serif"
                android:text="Thêm vào\ngiỏ hàng"
                android:textAllCaps="false"
                android:textColor="@color/primary"
                android:textSize="15sp"
                android:textStyle="bold" />

            <!-- Buy Now Button (2/5 of width) -->
            <androidx.appcompat.widget.AppCompatButton
                android:id="@+id/btnBuyNow"
                android:layout_width="0dp"
                android:layout_height="54dp"
                android:layout_gravity="center_vertical"
                android:layout_weight="4"
                android:background="@color/primary"
                android:fontFamily="sans-serif"
                android:text="Mua ngay"
                android:textAllCaps="false"
                android:textColor="@android:color/white"
                android:textSize="15sp"
                android:textStyle="bold" />

        </LinearLayout>

    </androidx.constraintlayout.widget.ConstraintLayout>

    <include
        layout="@layout/view_progress_overlay_white"
        android:id="@+id/progressOverlay"
        android:layout_height="match_parent"
        android:layout_width="match_parent"/>
</FrameLayout>